{"version":3,"sources":["Logboek/pages/UpdateLog.js"],"names":["UpdateLog","auth","useContext","AuthContext","useHttpClient","isLoading","sendRequest","useState","specifiekeLog","setSpecifiekeLog","titelInputRef","useRef","beschrijvingInputRef","history","useHistory","logId","useParams","useEffect","a","process","responseData","log","fetchLog","submitUpdateFormHandler","e","preventDefault","enteredTitel","current","value","enteredBeschrijving","JSON","stringify","titel","beschrijving","Authorization","token","push","className","onClick","onSubmit","defaultValue","ref","type","rows","cols"],"mappings":"+NA8FeA,UApFG,WAChB,IAAMC,EAAOC,qBAAWC,KACxB,EAAmCC,cAA3BC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,YACnB,EAA0CC,qBAA1C,mBAAOC,EAAP,KAAsBC,EAAtB,KACMC,EAAgBC,mBAChBC,EAAuBD,mBACvBE,EAAUC,cACVC,EAAQC,cAAYD,MAc1B,GAZAE,qBAAU,YACM,uCAAG,4BAAAC,EAAA,+EAEcZ,EAAY,GAAD,OACjCa,4BADiC,oBACYJ,IAHrC,OAEPK,EAFO,OAKbX,EAAiBW,EAAaC,KALjB,uGAAH,qDAQdC,KACC,CAAChB,EAAaS,KAEZP,EAAe,OAAO,+DAE3B,IAAMe,EAAuB,uCAAG,WAAOC,GAAP,iBAAAN,EAAA,6DAC9BM,EAAEC,iBACIC,EAAehB,EAAciB,QAAQC,MACrCC,EAAsBjB,EAAqBe,QAAQC,MAH3B,kBAMtBtB,EAAY,GAAD,OACZa,4BADY,oBACiCJ,GAChD,QACAe,KAAKC,UAAU,CACbC,MAAON,EACPO,aAAcJ,IAEhB,CACE,eAAgB,mBAChBK,cAAe,UAAYjC,EAAKkC,QAfR,OAkB5BtB,EAAQuB,KAAK,KAlBe,yGAAH,sDA0B7B,OACE,eAAC,WAAD,WACE,qBAAKC,UAAU,gBACf,cAAC,UAAD,IACChC,GACC,qBAAKgC,UAAU,SAAf,SACE,cAAC,IAAD,OAGFhC,GAAaG,GACb,sBAAK6B,UAAU,kBAAf,UACE,qBAAKC,QAfa,WACxBzB,EAAQuB,KAAK,MAc0BC,UAAU,QAA3C,eAGA,yCAAY7B,EAAcwB,SAC1B,qBAAKK,UAAU,4BAAf,SACE,uBAAME,SAAUhB,EAAhB,UACE,uBAAOiB,aAAchC,EAAcwB,MAAOS,IAAK/B,EAAegC,KAAK,SACnE,0BACEF,aAAchC,EAAcyB,aAC5BQ,IAAK7B,EACL+B,KAAK,IACLC,KAAK,OAEP,wBAAQF,KAAK,SAASL,UAAU,aAAhC","file":"static/js/8.29c757e7.chunk.js","sourcesContent":["import React, { Fragment, useState, useEffect, useRef, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router\";\r\n\r\nimport Logboek from \"./Logboek\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport \"../components//UpdateLog.css\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\n\r\nconst UpdateLog = () => {\r\n  const auth = useContext(AuthContext);\r\n  const { isLoading, sendRequest } = useHttpClient();\r\n  const [specifiekeLog, setSpecifiekeLog] = useState();\r\n  const titelInputRef = useRef();\r\n  const beschrijvingInputRef = useRef();\r\n  const history = useHistory();\r\n  const logId = useParams().logId;\r\n\r\n  useEffect(() => {\r\n    const fetchLog = async () => {\r\n      try {\r\n        const responseData = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/logboek/${logId}`\r\n        );\r\n        setSpecifiekeLog(responseData.log);\r\n      } catch (err) {}\r\n    };\r\n    fetchLog();\r\n  }, [sendRequest, logId]);\r\n\r\n  if (!specifiekeLog) return <h2> Kon deze workout niet vinden</h2>;\r\n\r\n  const submitUpdateFormHandler = async (e) => {\r\n    e.preventDefault();\r\n    const enteredTitel = titelInputRef.current.value;\r\n    const enteredBeschrijving = beschrijvingInputRef.current.value;\r\n\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/logboek/${logId}`,\r\n        \"PATCH\",\r\n        JSON.stringify({\r\n          titel: enteredTitel,\r\n          beschrijving: enteredBeschrijving,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + auth.token,\r\n        }\r\n      );\r\n      history.push(\"/\");\r\n    } catch (err) {}\r\n  };\r\n\r\n  const closeModalHandler = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"BG__OVERLAY\" />\r\n      <Logboek />\r\n      {isLoading && (\r\n        <div className=\"center\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {!isLoading && specifiekeLog && (\r\n        <div className=\"userLogs__modal\">\r\n          <div onClick={closeModalHandler} className=\"kruis\">\r\n            X\r\n          </div>\r\n          <h2>Update {specifiekeLog.titel}</h2>\r\n          <div className=\"updateLog__update__velden\">\r\n            <form onSubmit={submitUpdateFormHandler}>\r\n              <input defaultValue={specifiekeLog.titel} ref={titelInputRef} type=\"text\" />\r\n              <textarea\r\n                defaultValue={specifiekeLog.beschrijving}\r\n                ref={beschrijvingInputRef}\r\n                rows=\"4\"\r\n                cols=\"20\"\r\n              />\r\n              <button type=\"submit\" className=\"btn update\">\r\n                Update\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default UpdateLog;\r\n"],"sourceRoot":""}